<% if (markupFeatures.indexOf("xhtml") >= 0) { %>
    <!doctype html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
    <html class="no-js" lang="en-us" xmlns="http://www.w3.org/1999/xhtml">
<% } else { %>
    <!doctype html>
    <html class="no-js" lang="en-us">
<% } %>

    <head>
        <!-- META DATA -->
        <% if (markupFeatures.indexOf("xhtml") >= 0) { %>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <%  } else { %>
            <meta charset="utf-8" />
        <% } %>

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!--[if IE]><meta http-equiv="cleartype" content="on" /><![endif]-->

        <!-- SEO -->
        <title><%= projectName %></title>

        <% if (markupFeatures.indexOf("seo") >= 0) { %>
            <meta name="description" content="" />
            <meta name="author" content="" />
        <% } %>

        <% if (markupFeatures.indexOf("icons") >= 0) { %>
            <!-- ICONS -->
            <!-- Touch Icons - iOS and Android 2.1+  -->
            <link rel="apple-touch-icon" sizes="57x57" href="assets/media/images/apple-touch-icon-57x57.png" />
            <link rel="apple-touch-icon" sizes="60x60" href="assets/media/images/apple-touch-icon-60x60.png" />
            <link rel="apple-touch-icon" sizes="72x72" href="assets/media/images/apple-touch-icon-72x72.png" />
            <link rel="apple-touch-icon" sizes="76x76" href="assets/media/images/apple-touch-icon-76x76.png" />
            <link rel="apple-touch-icon" sizes="114x114" href="assets/media/images/apple-touch-icon-114x114.png" />
            <link rel="apple-touch-icon" sizes="120x120" href="assets/media/images/apple-touch-icon-120x120.png" />
            <link rel="apple-touch-icon" sizes="144x144" href="assets/media/images/apple-touch-icon-144x144.png" />
            <link rel="apple-touch-icon" sizes="152x152" href="assets/media/images/apple-touch-icon-152x152.png" />
            <link rel="apple-touch-icon" sizes="180x180" href="assets/media/images/apple-touch-icon-180x180.png" />
            <link rel="apple-touch-icon" sizes="196x196" href="assets/media/images/apple-touch-icon-196x196.png" />

            <!-- For IE 9 and below. ICO should be 32x32 pixels in size, generated from http://www.xiconeditor.com/ or might not work -->
            <!--[if lte IE 9]><link rel="shortcut icon" href="assets/media/images/favicon-32x32.ico" type="image/x-icon" ><![endif]-->

            <!-- All other browsers -->
            <link rel="icon" type="image/png" sizes="196x196" href="assets/media/images/favicon-196x196.png" />
            <link rel="icon" type="image/png" sizes="192x192" href="assets/media/images/favicon-192x192.png" />
            <link rel="icon" type="image/png" sizes="160x160" href="assets/media/images/favicon-160x160.png" />
            <link rel="icon" type="image/png" sizes="96x96" href="assets/media/images/favicon-96x96.png" />
            <link rel="icon" type="image/png" sizes="32x32" href="assets/media/images/favicon-32x32.png" />
            <link rel="icon" type="image/png" sizes="16x16" href="assets/media/images/favicon-16x16.png" />

            <!-- IE 11+ on Windows 8.1+ -->
            <meta name="msapplication-TileImage" content="assets/media/images/mstile-144x144.png">
            <meta name="msapplication-TileColor" content="#ff0000">
        <% } %>

        <!-- STYLESHEETS -->
        {{#block "styles"}}
            <!-- build:css assets/styles/screen.css -->
            <link rel="stylesheet" media="screen, projection" href="assets/styles/modern.css" />

            <% if (demoBuildSystem === "yes" && stylesBuildSystem === "none") { %>
                <link rel="stylesheet" media="screen, projection" href="assets/styles/modules/card.css" />
            <% } %>
            <!-- endbuild -->

            <% if (stylesFeatures.indexOf("ie9") >= 0) { %>
                <!--[if IE 9]><link rel="stylesheet" media="screen, projection" href="assets/styles/ie9.css" /><![endif]-->
            <% } %>

            <% if (stylesFeatures.indexOf("ie8") >= 0) { %>
                <!--[if lte IE 8]><link rel="stylesheet" media="screen, projection" href="assets/styles/ie8.css" /><![endif]-->
            <% } %>

            <% if (stylesFeatures.indexOf("print") >= 0) { %>
                <link rel="stylesheet" media="print" href="assets/styles/print.css" />
            <% } %>

        {{/block}}

        <!-- POLYFILLS -->
        {{#block "scriptsHead"}}
            <!-- build:js assets/scripts/head.js -->
                <% if (scriptsAdditional.indexOf("modernizr") >= 0) { %>
                    <script src="assets/vendor/modernizr/modernizr.js"></script>
                <% } %>
            <!-- endbuild -->
        {{/block}}
    </head>
    <body>
        <!-- CONTENT -->
        {{#block "body"}}
        {{/block}}

        <!-- JAVASCRIPT -->
        <% if (scriptsBuildSystem.indexOf("requirejs") >= 0) { %>
            <!-- build:js assets/vendor/requirejs/require.js -->
                <script src="assets/vendor/requirejs/require.js"></script>
            <!-- endbuild -->

            <!-- build:js assets/scripts/config.js -->
                <script src="assets/scripts/config.js"></script>
            <!-- endbuild -->
        <% } %>

        <script>
            /**
             * Global constants
             *
             * TODO: ideally these values would be filled in from the server side
             *
             * @class SETTINGS
             * @static
             */
            window.SETTINGS = {};

            /**
             * Indicates whether we are running on a production environment
             *
             * @property IS_PRODUCTION
             * @type Boolean
             * @final
             */
            SETTINGS.IS_PRODUCTION = false;

            /**
             * Appended to query string for versioning of network resources (CSS,
             * JavaScript, etc). This version number should be updated in production
             * for every release.
             *
             * @property APP_VERSION
             * @type {String}
             * @final
             */
            SETTINGS.APP_VERSION = '@@version';

            /**
             * Set to true to allow application to output to browser console, false
             * to silence all console output. This should be set to `false` on
             * production.
             *
             * @property LOG_CONSOLE
             * @type Boolean
             * @final
             */
            SETTINGS.LOG_CONSOLE = !SETTINGS.IS_PRODUCTION;

            /**
             * Appended to query string to defeat caching of network resources (CSS,
             * JavaScript, etc). Should be set to '' on production
             *
             * @property CACHE_BUSTER
             * @type String
             * @final
             */
            SETTINGS.CACHE_BUSTER = SETTINGS.IS_PRODUCTION ? '' : '&bust=' + Math.random();

            /**
             * Root path for all JavaScript files
             *
             * @property SCRIPT_PATH
             * @type String
             * @final
             */
            SETTINGS.SCRIPT_PATH = 'assets/scripts/';

            <% if (scriptsBuildSystem.indexOf("requirejs") >= 0) { %>
                /**
                 * Set any RequireJs configuration that is dependent on dynamic
                 * configuration variables. Note that this config data is merged into
                 * any other require.config() statements defined elsewhere.
                 */
                require.config({
                    // Script path
                    baseUrl: SETTINGS.SCRIPT_PATH,

                    // Params to append to the end of each js file request
                    urlArgs: 'v=' + SETTINGS.APP_VERSION + SETTINGS.CACHE_BUSTER
                });

                /**
                 * Set route and kick off RequireJs, which begins loading of scripts
                 * starting from main.js.
                 */
                require(['main']);
            <% } %>
        </script>

        {{#block "scriptsBody"}}
            <% if (scriptsBuildSystem.indexOf("requirejs") < 0) { %>
                <!-- build:js assets/scripts/vendor.js -->
                    <% if (scriptsAdditional.indexOf("jquery") >= 0 || demoBuildSystem === "yes") { %>
                        <script src="assets/vendor/jquery/dist/jquery.min.js"></script>
                    <% } %>
                <!-- endbuild -->

                <!-- build:js assets/scripts/main.js -->
                    <% if (jstBuildSystem !== "no") { %>
                        <script src="assets/scripts/precompiledJst.js"></script>
                    <% } %>

                    <% if (scriptsBuildSystem === "none") { %>
                        <script src="assets/scripts/shim.js"></script>

                            <% if (demoBuildSystem === "yes") { %>
                                <script src="assets/scripts/views/DemoView.js"></script>
                            <% } %>

                        <script src="assets/scripts/App.js"></script>
                    <% } %>

                    <script src="assets/scripts/main.js"></script>
                <!-- endbuild -->
            <% } %>
        {{/block}}

    </body>
</html>
